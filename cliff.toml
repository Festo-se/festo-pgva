[changelog]
header = ""
body = """
{% for group, commits in commits | group_by(attribute="group") %}
### {{ group }}
{% for commit in commits %}
- {{ commit.message | upper_first }} ([`{{ commit.id | truncate(length=7, end="") }}`]({{ commit.id }}))
{%- endfor %}
{% endfor %}
"""
trim = true

[git]
# Do not require conventional commit prefixes â€” sections are driven by the
# "Changelog: <section>" trailer on each commit instead.
conventional_commits = false
filter_unconventional = false
split_commits = false
protect_breaking_commits = false
filter_commits = true    # omit commits with no matching trailer

commit_parsers = [
    # Map the value of the "Changelog:" trailer to the group (section heading).
    { trailer = "Changelog", group = "${1}" },
]

commit_preprocessors = [
    # Strip conventional commit prefixes (feat:, fix(scope):, etc.) from the title.
    { pattern = "^(feat|fix|chore|docs|style|refactor|perf|test|build|ci)([\\(\\[].+[\\)\\]])?!?: ", replace = "" },
]
tag_pattern = "[0-9]+\\.[0-9]+\\.[0-9]+"
